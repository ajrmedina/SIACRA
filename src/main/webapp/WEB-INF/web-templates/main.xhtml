<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:fn="http://java.sun.com/jsp/jstl/functions"
      xmlns:p="http://primefaces.org/ui"
      xmlns:sec="http://www.springframework.org/security/tags">
    
    <f:view>
        <h:head>
            <title><ui:insert name="title">Default title</ui:insert></title>
            <meta name="_csrf" content="${_csrf.token}" />
            <!-- default header name is X-CSRF-TOKEN -->
            <meta name="_csrf_header" content="${_csrf.headerName}" />
        </h:head>
        <h:body>
            <h:outputStylesheet name="css/siacra.css" />
            <h:outputStylesheet name="grid/grid.css" library="primefaces" />
            <h:outputStylesheet name="webjars/font-awesome/4.2.0/css/font-awesome-jsf.css" />
            <h:outputScript name="js/calendar_es.js" />
            
            <header>
                <div class="ui-grid ui-grid-responsive" style="text-align: center">
                    <div class="ui-grid-row">
                        <div class="ui-grid-col-4"><p:graphicImage library="img" name="ues.jpg" width="80px" height="90px"/></div>
                        <div class="ui-grid-col-4">
                            <h3 class="title">
                                <br />
                                Universidad de El Salvador <br />
                                Facultad de Ingeniería y Arquitectura <br/>
                                <h:outputText value="#{identityBean.principal.escuela.nombreescuela}" />
                            </h3>
                        </div>
                        <div class="ui-grid-col-4">
                            <h4 class="title">
                                <br />
                                #{request.userPrincipal.name} <br /> 
                                #{identityBean.user.nivel.acceso}
                                <sec:authorize access="hasRole('ROLE_ADMINISTRADOR')">                                    
                                    
                                    
                                </sec:authorize>
                                <br />
                            </h4>                            
                            <h:form>
                                <input type="hidden" name="${_csrf.parameterName}" value="${_csrf.token}"/>
                                <p:commandButton value="Cerrar Sesion" action="#{loginMBean.logout}" icon="fa fa-lock" ajax="false" />
                            </h:form>                          
                        </div>
                    </div>
                </div>
            </header>
           
            <nav>
                <h:form class="pad-top-20">
                    <input type="hidden" name="${_csrf.parameterName}" value="${_csrf.token}"/>
                    <p:menubar styleClass="menu" rendered="#{userBean.user.sesion == true}">  
                        
                        <p:menuitem value="Inicio" url="/resources/views/index/index.xhtml" icon="fa fa-home"/>                                                             
                       
                        <p:submenu label="Mantenimientos" icon="fa fa-gears">
                            
                            <!-- Administrador -->
                            <sec:authorize ifAllGranted="ROLE_ADMINISTRADOR">
                                <p:menuitem value="Niveles de Acceso" url="/resources/views/admin/ListarNivelesAcceso.xhtml" icon="fa fa-key" />
                                <p:menuitem value="Usuarios" url="/resources/views/usuarios/ListarUsuarios.xhtml" icon="fa fa-users" />
                                <p:menuitem value="Docentes" url="/resources/views/usuarios/ListarDocentes.xhtml" icon="fa fa-user" />
                                <p:menuitem value="Escalafon" url="/resources/views/admin/ListarEscalafon.xhtml" icon="fa fa-list" />
                                <p:menuitem value="Contrato" url="/resources/views/admin/ListarContrato.xhtml" icon="fa fa-clipboard" />
                                <p:menuitem value="Categorias" url="/resources/views/admin/ListarCategorias.xhtml" icon="fa fa-list" />
                                <p:menuitem value="Ciclo" url="/resources/views/admin/ListarCiclo.xhtml" icon="fa fa-clock-o" />
                                <p:menuitem value="Escuelas" url="/resources/views/admin/ListarEscuela.xhtml" icon="fa fa-building" />
                                <p:menuitem value="TipoActividad" url="/resources/views/admin/ListarTipoActividad.xhtml" icon="fa fa-list" />
                                <p:menuitem value="Tipo Grupo" url="/resources/views/admin/ListarTipoGrupo.xhtml" icon="fa fa-list" />                        
                            </sec:authorize>
                            
                            <!-- Director y Responsable -->
                            <sec:authorize ifAnyGranted="ROLE_RESPONSABLE, ROLE_DIRECTOR">
                                <p:menuitem value="Usuarios" url="/resources/views/usuarios/ListarUsuarios.xhtml" icon="fa fa-users" />
                                <p:menuitem value="Docentes" url="/resources/views/usuarios/ListarDocentes.xhtml" icon="fa fa-user" />
                                <p:menuitem value="Asignatura" url="/resources/views/responsabilidad/ListarAsignatura.xhtml" icon="fa fa-book" />
                                <p:menuitem value="Actividad" url="/resources/views/responsabilidad/ListarActividad.xhtml" icon="fa fa-list" />
                                <p:menuitem value="Trabajos de Graduacion" url="/resources/views/responsabilidad/ListarTG.xhtml" icon="fa fa-clipboard" />
                                <p:menuitem value="Proyecto" url="/resources/views/responsabilidad/ListarProyecto.xhtml" icon="fa fa-clipboard" />
                                <p:menuitem value="Oferta" url="/resources/views/responsabilidad/ListarOferta.xhtml" icon="fa fa-list" />
                            </sec:authorize>
                            <sec:authorize ifAnyGranted="ROLE_DIRECTOR">
                                <p:menuitem value="Reportes" url="/resources/views/director/ListarReportes.xhtml" icon="fa fa-file-pdf-o" />                                
                            </sec:authorize>
                            <sec:authorize ifAnyGranted="ROLE_RESPONSABLE">
                                <p:menuitem value="Horario" url="/resources/views/responsable/ListarHorario.xhtml" icon="fa fa-list" /> 
                                <p:menuitem value="Grupos" url="/resources/views/responsable/ListarGrupo.xhtml" icon="fa fa-group" />
                                <p:menuitem value="Asignar Responsabilidad" url="/resources/views/responsable/AsignarResponsabilidad.xhtml" icon="fa fa-clipboard" />                             
                            </sec:authorize>
                            
                             <!-- Miembro JD -->
                            <sec:authorize ifAllGranted="ROLE_MIEMBRO_JD">
                                <p:menuitem value="Acuerdos" url="/resources/views/jd/ListarAcuerdo.xhtml" icon="fa fa-file-text-o" />
                                <p:menuitem value="Aprobar Responsabilidad" url="/resources/views/jd/AprobarResponsabilidad.xhtml" icon="fa fa-check-square-o" />                                
                            </sec:authorize>
                             
                            <p:menuitem value="Permanencia" url="/resources/views/docente/ListarPermanencia.xhtml" icon="fa fa-calendar" rendered="#{identityBean.user.esDocente==true}" />
                            <p:menuitem value="Reportes Docentes" url="/resources/views/docente/ReportesDocente.xhtml" icon="fa fa-file-o" rendered="#{identityBean.user.esDocente==true}" />                                
                           
                        </p:submenu>
                        
                        
                        <ui:insert name="add-menu-items"> </ui:insert>
                        <sec:authorize ifAnyGranted="ROLE_DIRECTOR, ROLE_RESPONSABLE, ROLE_MIEMBRO_JD"> 
                            <p:menuitem value="#{auxiliarBean.getNumeroMensajes(identityBean.user.idUsuario)} Mensajes" style="font-weight: bolder" url="/resources/views/index/ListarMensajes.xhtml" icon="fa fa-inbox" rendered="#{identityBean.user.esDocente==true}"/>
                            <p:menuitem value="#{auxiliarBean.getNumeroMensajes(identityBean.user.idUsuario)} Mensajes" style="font-weight: bolder" url="/resources/views/index/ListarMensajes2.xhtml" icon="fa fa-inbox" rendered="#{identityBean.user.esDocente==false}"/>
                        </sec:authorize>
                        <p:menuitem value="Ayuda" icon="fa fa-question-circle"/>
 
                    </p:menubar>
                </h:form>
            </nav>
            
                        
            <section class="pad-top-20">
                <p:ajaxStatus onstart="PF('statusDialog').show()" onsuccess="PF('statusDialog').hide()" />
                <p:dialog widgetVar="statusDialog" draggable="false" closable="false" resizable="false" showHeader="false" showEffect="fade" hideEffect="fade" position="right,bottom">
                    <p:graphicImage library="img" name="ajax-loader.gif" />
                </p:dialog>
                <center><h1 class="title"> <ui:insert name="title-view">{{Titulo de pantalla por defecto}}</ui:insert> </h1></center>
                <br /><br />
                <ui:insert name="content">{{Contenido por defecto}}</ui:insert>       
            </section>       
            
            <footer class="pad-top-20">
                <h6 class="title">
                    © FIA-UES SIACRA Development Team:
                    Alejandro Medina, Daniel Martínez, Fátima Pérez e Isaias Palacios  <br />
                    Trabajo de Graduación 2015
                </h6>
            </footer>
            
        </h:body>
    </f:view>
</html>
